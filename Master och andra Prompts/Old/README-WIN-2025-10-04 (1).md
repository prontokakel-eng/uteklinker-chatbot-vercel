# README – Kod-prompts (Windows-version)

## Struktur
- system-prompt-WIN.md  
- master-prompt-WIN.md  
- oversattning-prompt-WIN.md  
- ui-ux-prompt-WIN.md  

## Användning
1. System Prompt → Klistra in först i ny session.  
2. Master Prompt → Använd för backend/chatbotlogik.  
3. Översättningsprompt → Använd separat session, mata in SE-frågor.  
4. UI/UX-prompt → Använd separat session för frontend.  

## Tips
- Versionera (v1, v2 …).  
- Placera i /kod i projektet.  

## Flödesdiagram – FAQ-chatbot

```mermaid
flowchart TD
    KUND["🧑 Kundfråga"] --> GATE["🚪 gate.js<br/>Blockering & Rate-limit"]
    GATE -->|OK| FILTERS["🧹 filters.js<br/>Whitelist/Blacklist/Gibberish"]
    FILTERS -->|OK| LANG["🌐 detect-lang-core.js<br/>Språkdetektion"]
    LANG --> GREETING["🙋 filters.js<br/>checkGreeting()"]
    GREETING -->|Träff| SVAR["💬 Svar till kund"]

    GREETING -->|Ingen träff| RELEVANCE["❓ filters.js<br/>checkRelevance()"]
    RELEVANCE -->|Ej relevant| SVAR

    RELEVANCE -->|OK| FAQ["📚 faq-data.js<br/>searchFaq() + cache"]
    FAQ -->|Träff| DIALOG["🗨️ faq-dialog.js<br/>handleFaqDialog()"]
    DIALOG --> SVAR

    FAQ -->|Ingen träff| AI["🤖 ai-fallback.js<br/>askAI() med top-N FAQ som kontext"]
    AI --> SVAR

    subgraph CACHES ["SSOT Cache"]
        FC["faq-cache.js"]:::cache
        LS["faq-sheets.js"]:::sheets
    end

    LANG -.-> CACHES
    FAQ -.-> CACHES

    classDef cache fill=#fffae6,stroke=#333,stroke-width=1px;
    classDef sheets fill=#e6f7ff,stroke=#333,stroke-width=1px;
```