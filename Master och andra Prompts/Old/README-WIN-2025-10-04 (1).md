# README â€“ Kod-prompts (Windows-version)

## Struktur
- system-prompt-WIN.md  
- master-prompt-WIN.md  
- oversattning-prompt-WIN.md  
- ui-ux-prompt-WIN.md  

## AnvÃ¤ndning
1. System Prompt â†’ Klistra in fÃ¶rst i ny session.  
2. Master Prompt â†’ AnvÃ¤nd fÃ¶r backend/chatbotlogik.  
3. Ã–versÃ¤ttningsprompt â†’ AnvÃ¤nd separat session, mata in SE-frÃ¥gor.  
4. UI/UX-prompt â†’ AnvÃ¤nd separat session fÃ¶r frontend.  

## Tips
- Versionera (v1, v2 â€¦).  
- Placera i /kod i projektet.  

## FlÃ¶desdiagram â€“ FAQ-chatbot

```mermaid
flowchart TD
    KUND["ğŸ§‘ KundfrÃ¥ga"] --> GATE["ğŸšª gate.js<br/>Blockering & Rate-limit"]
    GATE -->|OK| FILTERS["ğŸ§¹ filters.js<br/>Whitelist/Blacklist/Gibberish"]
    FILTERS -->|OK| LANG["ğŸŒ detect-lang-core.js<br/>SprÃ¥kdetektion"]
    LANG --> GREETING["ğŸ™‹ filters.js<br/>checkGreeting()"]
    GREETING -->|TrÃ¤ff| SVAR["ğŸ’¬ Svar till kund"]

    GREETING -->|Ingen trÃ¤ff| RELEVANCE["â“ filters.js<br/>checkRelevance()"]
    RELEVANCE -->|Ej relevant| SVAR

    RELEVANCE -->|OK| FAQ["ğŸ“š faq-data.js<br/>searchFaq() + cache"]
    FAQ -->|TrÃ¤ff| DIALOG["ğŸ—¨ï¸ faq-dialog.js<br/>handleFaqDialog()"]
    DIALOG --> SVAR

    FAQ -->|Ingen trÃ¤ff| AI["ğŸ¤– ai-fallback.js<br/>askAI() med top-N FAQ som kontext"]
    AI --> SVAR

    subgraph CACHES ["SSOT Cache"]
        FC["faq-cache.js"]:::cache
        LS["faq-sheets.js"]:::sheets
    end

    LANG -.-> CACHES
    FAQ -.-> CACHES

    classDef cache fill=#fffae6,stroke=#333,stroke-width=1px;
    classDef sheets fill=#e6f7ff,stroke=#333,stroke-width=1px;
```