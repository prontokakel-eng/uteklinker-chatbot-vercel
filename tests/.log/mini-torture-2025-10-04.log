PS C:\uteklinker-chatbot-vercel> node tests/chatBot-torture-mini.mjs
ğŸ“¥ Loaded 22 vars frÃ¥n .env.local
ğŸ”‘ OPENAI_API_KEY = sk-pr...2IkAA (len=164, source=.env file)
ğŸ”‘ OPENAI_PROJECT_ID = proj_...2AP5D (len=29, source=.env file)
ğŸ”‘ SHEET_ID = ${SHE...MAIN} (len=16, source=.env file)
ğŸ”‘ SHEET_ID_MAIN = 1_FjA...E-dlY (len=44, source=.env file)
ğŸ”‘ GCP_CLIENT_EMAIL = chatb...t.com (len=68, source=.env file)
ğŸ”‘ GCP_PROJECT_ID = utekl...ercel (len=25, source=.env file)
ğŸ”‘ GCP_PRIVATE_KEY_ID = GCP_P...45678 (len=59, source=.env file)
ğŸ”‘ GCP_PRIVATE_KEY = -----...----
 (len=1704, source=.env file)
ğŸ“ Running script: C:\uteklinker-chatbot-vercel\tests\chatBot-torture-mini.mjs
ğŸ—’ï¸ Logfile: C:\uteklinker-chatbot-vercel\tests\logs\mini-torture-2025-10-04.log
ğŸ“‚ Using test cases: C:\uteklinker-chatbot-vercel\tests\mini-torture-2-questions.json
ğŸš€ Running MINI torture test (direct chatPipeline)
[faq-data.log] [2025-10-04T11:33:22.937Z] ğŸ”„ Init FAQ data (caller: detectLangCore)
âœ… GCP_CLIENT_EMAIL loaded (length: 68)
âš ï¸ ENV var "GCP_PRIVATE_KEY" hade whitespace, korrigerar automatiskt.
âœ… GCP_PRIVATE_KEY loaded (length: 1703)
âœ… SHEET_ID_MAIN loaded (length: 44)
[faq-sheets] Init Sheets client med env: { email: 'âœ…', key: 'âœ…', sheetId: 'âœ…' }
ğŸ”‘ Google Sheets client initialized (first call from: loadAllFaqData)
[faq-sheets] âœ… Loaded FAQ_SE: 238 rows
â™»ï¸ Google Sheets client reused (called from: loadAllFaqData)
[faq-sheets] âœ… Loaded FAQ_EN: 238 rows
â™»ï¸ Google Sheets client reused (called from: loadAllFaqData)
[faq-sheets] âœ… Loaded FAQ_DA: 238 rows
â™»ï¸ Google Sheets client reused (called from: loadAllFaqData)
[faq-sheets] âœ… Loaded FAQ_DE: 238 rows
â™»ï¸ Google Sheets client reused (called from: loadAllLookups)
[faq-sheets] âœ… Loaded SE_FULL_LOOKUP: 1353 keywords
â™»ï¸ Google Sheets client reused (called from: loadAllLookups)
[faq-sheets] âœ… Loaded EN_FULL_LOOKUP: 1353 keywords
â™»ï¸ Google Sheets client reused (called from: loadAllLookups)
[faq-sheets] âœ… Loaded DA_FULL_LOOKUP: 1353 keywords
â™»ï¸ Google Sheets client reused (called from: loadAllLookups)
[faq-sheets] âœ… Loaded DE_FULL_LOOKUP: 1353 keywords
[faq-cache.log] [2025-10-04T11:33:30.221Z] âœ… FAQ+Lookups cache laddad & sparad (caller: detectLangCore): FAQ={"SE":238,"DA":238,"DE":238,"EN":238}, Lookups={"SE":0,"DA":0,"DE":0,"EN":0}
[faq-data.log] [2025-10-04T11:33:30.223Z] âœ… Fuse-index byggt fÃ¶r FAQ (caller: detectLangCore): {"SE":238,"DA":238,"DE":238,"EN":238}
[faq-data.log] [2025-10-04T11:33:30.236Z] [DEBUG] searchFaq lang=SE, input="Vilka mÃ¥tt har ni?" â†’ 1 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.236Z]    #1: "Vilka format har ni?" (score=0.527)
[faq-data.log] [2025-10-04T11:33:30.237Z] âœ… BÃ¤sta trÃ¤ff: "Vilka format har ni?" â†’ "Vi erbjuder flera olika standardformat i 20 mm tjocklek. Exempel: 60x60, 80x80, ..."
[faq-data.log] [2025-10-04T11:33:30.247Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Vilka mÃ¥tt har ni?"
[faq-data.log] [2025-10-04T11:33:30.256Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Vilka mÃ¥tt har ni?"
[faq-data.log] [2025-10-04T11:33:30.259Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Vilka mÃ¥tt har ni?"
[detect-lang.log] [2025-10-04T11:33:30.259Z] âœ… FAQ fuzzy detect: "Vilka mÃ¥tt har ni?" â†’ SE
[chat-pipeline.log] [2025-10-04T11:33:30.260Z] [id=434e6] ğŸŒ Lang detect: "Vilka mÃ¥tt har ni?" â†’ lang=SE, via=faq-fuzzy, conf=1
[faq-data.log] [2025-10-04T11:33:30.262Z] [DEBUG] searchFaq lang=SE, input="Vilka mÃ¥tt har ni?" â†’ 1 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.263Z]    #1: "Vilka format har ni?" (score=0.527)
[faq-data.log] [2025-10-04T11:33:30.263Z] âœ… BÃ¤sta trÃ¤ff: "Vilka format har ni?" â†’ "Vi erbjuder flera olika standardformat i 20 mm tjocklek. Exempel: 60x60, 80x80, ..."
[chat-pipeline.log] [2025-10-04T11:33:30.264Z] [id=434e6] âœ… FAQ hit: "Vilka mÃ¥tt har ni?" â†’ "Vi erbjuder flera olika standardformat i 20 mm tjocklek. Exempel: 60x60, 80x80, ..."
[SE] Vilka mÃ¥tt har ni? â†’ got=SE, expected=SE, ok=ğŸŸ¢
[faq-data.log] [2025-10-04T11:33:30.269Z] [DEBUG] searchFaq lang=SE, input="Ã„r plattorna halksÃ¤kra?" â†’ 2 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.270Z]    #1: "Ã„r plattorna halksÃ¤kra?" (score=0.000)
[faq-data.log] [2025-10-04T11:33:30.271Z]    #2: "Ã„r plattorna sÃ¤kra fÃ¶r barn att leka pÃ¥?" (score=0.583)
[faq-data.log] [2025-10-04T11:33:30.271Z] âœ… BÃ¤sta trÃ¤ff: "Ã„r plattorna halksÃ¤kra?" â†’ "Ja, klinkerdÃ¤ckÂ® har halkskyddade ytor anpassade fÃ¶r utomhusbruk...."
[faq-data.log] [2025-10-04T11:33:30.274Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Ã„r plattorna halksÃ¤kra?"
[faq-data.log] [2025-10-04T11:33:30.279Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Ã„r plattorna halksÃ¤kra?"
[faq-data.log] [2025-10-04T11:33:30.282Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Ã„r plattorna halksÃ¤kra?"
[detect-lang.log] [2025-10-04T11:33:30.283Z] âœ… FAQ fuzzy detect: "Ã„r plattorna halksÃ¤kra?" â†’ SE
[chat-pipeline.log] [2025-10-04T11:33:30.283Z] [id=450b5] ğŸŒ Lang detect: "Ã„r plattorna halksÃ¤kra?" â†’ lang=SE, via=faq-fuzzy, conf=1
[faq-data.log] [2025-10-04T11:33:30.286Z] [DEBUG] searchFaq lang=SE, input="Ã„r plattorna halksÃ¤kra?" â†’ 2 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.286Z]    #1: "Ã„r plattorna halksÃ¤kra?" (score=0.000)
[faq-data.log] [2025-10-04T11:33:30.287Z]    #2: "Ã„r plattorna sÃ¤kra fÃ¶r barn att leka pÃ¥?" (score=0.583)
[faq-data.log] [2025-10-04T11:33:30.287Z] âœ… BÃ¤sta trÃ¤ff: "Ã„r plattorna halksÃ¤kra?" â†’ "Ja, klinkerdÃ¤ckÂ® har halkskyddade ytor anpassade fÃ¶r utomhusbruk...."
[chat-pipeline.log] [2025-10-04T11:33:30.288Z] [id=450b5] âœ… FAQ hit: "Ã„r plattorna halksÃ¤kra?" â†’ "Ja, klinkerdÃ¤ckÂ® har halkskyddade ytor anpassade fÃ¶r utomhusbruk...."
[SE] Ã„r plattorna halksÃ¤kra? â†’ got=SE, expected=SE, ok=ğŸŸ¢
[faq-data.log] [2025-10-04T11:33:30.307Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="What sizes do you offer?"
[faq-data.log] [2025-10-04T11:33:30.310Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="What sizes do you offer?"
[faq-data.log] [2025-10-04T11:33:30.313Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="What sizes do you offer?"
[faq-data.log] [2025-10-04T11:33:30.321Z] [DEBUG] searchFaq lang=EN, input="What sizes do you offer?" â†’ 2 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.322Z]    #1: "What sizes do you have in 20 mm?" (score=0.574)
[faq-data.log] [2025-10-04T11:33:30.323Z]    #2: "Which countries do you offer standard delivery to?" (score=0.647)
[faq-data.log] [2025-10-04T11:33:30.323Z] âœ… BÃ¤sta trÃ¤ff: "What sizes do you have in 20 mm?" â†’ "Standard sizes include 60x60, 80x80, 90x90, 60x120, 40x120, 100x100 cm. Would yo..."
[detect-lang.log] [2025-10-04T11:33:30.324Z] âœ… FAQ fuzzy detect: "What sizes do you offer?" â†’ EN
[chat-pipeline.log] [2025-10-04T11:33:30.324Z] [id=cdd4c] ğŸŒ Lang detect: "What sizes do you offer?" â†’ lang=EN, via=faq-fuzzy, conf=1
[faq-data.log] [2025-10-04T11:33:30.330Z] [DEBUG] searchFaq lang=EN, input="What sizes do you offer?" â†’ 2 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.331Z]    #1: "What sizes do you have in 20 mm?" (score=0.574)
[faq-data.log] [2025-10-04T11:33:30.331Z]    #2: "Which countries do you offer standard delivery to?" (score=0.647)
[faq-data.log] [2025-10-04T11:33:30.332Z] âœ… BÃ¤sta trÃ¤ff: "What sizes do you have in 20 mm?" â†’ "Standard sizes include 60x60, 80x80, 90x90, 60x120, 40x120, 100x100 cm. Would yo..."
[chat-pipeline.log] [2025-10-04T11:33:30.332Z] [id=cdd4c] âœ… FAQ hit: "What sizes do you offer?" â†’ "Standard sizes include 60x60, 80x80, 90x90, 60x120, 40x120, 100x100 cm. Would yo..."
[EN] What sizes do you offer? â†’ got=EN, expected=EN, ok=ğŸŸ¢
[faq-data.log] [2025-10-04T11:33:30.348Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Are the tiles slip resistant?"
[faq-data.log] [2025-10-04T11:33:30.351Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Are the tiles slip resistant?"
[faq-data.log] [2025-10-04T11:33:30.355Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Are the tiles slip resistant?"
[faq-data.log] [2025-10-04T11:33:30.358Z] [DEBUG] searchFaq lang=EN, input="Are the tiles slip resistant?" â†’ 8 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.359Z]    #1: "Are the tiles slip-resistant?" (score=0.186)
[faq-data.log] [2025-10-04T11:33:30.359Z]    #2: "Are the tiles UV-resistant?" (score=0.415)
[faq-data.log] [2025-10-04T11:33:30.359Z]    #3: "Are the tiles scratch-resistant?" (score=0.491)
[faq-data.log] [2025-10-04T11:33:30.360Z]    #4: "Are the tiles resistant to chemicals?" (score=0.526)
[faq-data.log] [2025-10-04T11:33:30.360Z]    #5: "Are the tiles resistant to wear?" (score=0.526)
[faq-data.log] [2025-10-04T11:33:30.361Z] âœ… BÃ¤sta trÃ¤ff: "Are the tiles slip-resistant?" â†’ "Yes, klinkerdÃ¤ckÂ® has slip-resistant surfaces designed for outdoor use...."
[detect-lang.log] [2025-10-04T11:33:30.361Z] âœ… FAQ fuzzy detect: "Are the tiles slip resistant?" â†’ EN
[chat-pipeline.log] [2025-10-04T11:33:30.362Z] [id=8f59c] ğŸŒ Lang detect: "Are the tiles slip resistant?" â†’ lang=EN, via=faq-fuzzy, conf=1
[faq-data.log] [2025-10-04T11:33:30.365Z] [DEBUG] searchFaq lang=EN, input="Are the tiles slip resistant?" â†’ 8 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:30.366Z]    #1: "Are the tiles slip-resistant?" (score=0.186)
[faq-data.log] [2025-10-04T11:33:30.366Z]    #2: "Are the tiles UV-resistant?" (score=0.415)
[faq-data.log] [2025-10-04T11:33:30.366Z]    #3: "Are the tiles scratch-resistant?" (score=0.491)
[faq-data.log] [2025-10-04T11:33:30.367Z]    #4: "Are the tiles resistant to chemicals?" (score=0.526)
[faq-data.log] [2025-10-04T11:33:30.367Z]    #5: "Are the tiles resistant to wear?" (score=0.526)
[faq-data.log] [2025-10-04T11:33:30.367Z] âœ… BÃ¤sta trÃ¤ff: "Are the tiles slip-resistant?" â†’ "Yes, klinkerdÃ¤ckÂ® has slip-resistant surfaces designed for outdoor use...."
[chat-pipeline.log] [2025-10-04T11:33:30.368Z] [id=8f59c] âœ… FAQ hit: "Are the tiles slip resistant?" â†’ "Yes, klinkerdÃ¤ckÂ® has slip-resistant surfaces designed for outdoor use...."
[EN] Are the tiles slip resistant? â†’ got=EN, expected=EN, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Are the tiles slip resistant?", pre=SE (via=heuristic+anchors), chat=EN (via=faq) }
[faq-data.log] [2025-10-04T11:33:30.379Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Er det frostsikkert?"
[faq-data.log] [2025-10-04T11:33:30.382Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Er det frostsikkert?"
[faq-data.log] [2025-10-04T11:33:30.385Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Er det frostsikkert?"
[faq-data.log] [2025-10-04T11:33:30.387Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Er det frostsikkert?"
[detect-lang.log] [2025-10-04T11:33:30.395Z] â„¹ï¸ Rules resultat: {"lang":"UNKNOWN","via":"heuristic","matches":[],"confidence":0.5,"NeedsAI":true} (conf=0.6)
[detect-lang.log] [2025-10-04T11:33:30.396Z] ğŸ¤– AI fallback aktiverad fÃ¶r input="Er det frostsikkert?"
âœ… OPENAI_API_KEY loaded (length: 164)
ğŸ”‘ OpenAI client initialized (first call from: detectLangCore)
[detect-lang.log] [2025-10-04T11:33:31.498Z] ğŸ¤– AI svar: "DA"
[chat-pipeline.log] [2025-10-04T11:33:31.498Z] [id=770de] ğŸŒ Lang detect: "Er det frostsikkert?" â†’ lang=DA, via=AI-fallback, conf=0.9
[faq-data.log] [2025-10-04T11:33:31.502Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Er det frostsikkert?"
[faq-data.log] [2025-10-04T11:33:31.505Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Er det frostsikkert?"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:33.155Z] [id=770de] ğŸ¤– AI fallback: "Er det frostsikkert?" (lang=DA, via=AI-fallback) â†’ "Kan du specificere, hvad du refererer til? Hvis du taler om et bestemt produkt e..."
[DA] Er det frostsikkert? â†’ got=DA, expected=DA, ok=ğŸŸ¢
ğŸ¤– AI fallback ACTUALLY USED for input="Er det frostsikkert?"
âš ï¸ PreDetect â‰  ChatDetect { input="Er det frostsikkert?", pre=UNKNOWN (via=heuristic), chat=DA (via=ai) }
[faq-data.log] [2025-10-04T11:33:33.176Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Kan jeg selv montere det?"
[faq-data.log] [2025-10-04T11:33:33.180Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Kan jeg selv montere det?"
[faq-data.log] [2025-10-04T11:33:33.184Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Kan jeg selv montere det?"
[faq-data.log] [2025-10-04T11:33:33.187Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Kan jeg selv montere det?"
[detect-lang.log] [2025-10-04T11:33:33.199Z] â„¹ï¸ Rules resultat: {"lang":"DA","via":"heuristic+anchors","matches":[{"word":"jeg","match":"jeg","rating":1},{"word":"jeg","match":"jeg","rating":1},{"word":"selv","match":"selv","rating":1}],"confidence":0.7,"NeedsAI":false} (conf=0.8)
[detect-lang.log] [2025-10-04T11:33:33.200Z] â¬…ï¸ Default return: lang=DA, conf=0.8
[chat-pipeline.log] [2025-10-04T11:33:33.200Z] [id=5f843] ğŸŒ Lang detect: "Kan jeg selv montere det?" â†’ lang=DA, via=heuristic+anchors, conf=0.8
[faq-data.log] [2025-10-04T11:33:33.204Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Kan jeg selv montere det?"
[faq-data.log] [2025-10-04T11:33:33.207Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Kan jeg selv montere det?"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:35.530Z] [id=5f843] ğŸ¤– AI fallback: "Kan jeg selv montere det?" (lang=DA, via=heuristic+anchors) â†’ "Ja, du kan ofte selv montere mange produkter, hvis du fÃ¸lger de medfÃ¸lgende inst..."
[DA] Kan jeg selv montere det? â†’ got=DA, expected=DA, ok=ğŸŸ¢
ğŸ¤– AI fallback ACTUALLY USED for input="Kan jeg selv montere det?"
[faq-data.log] [2025-10-04T11:33:35.546Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Gibt es verschiedene Farben?"
[faq-data.log] [2025-10-04T11:33:35.550Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Gibt es verschiedene Farben?"
[faq-data.log] [2025-10-04T11:33:35.555Z] [DEBUG] searchFaq lang=DE, input="Gibt es verschiedene Farben?" â†’ 1 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:35.556Z]    #1: "Gibt es verschiedene OberflÃ¤chentexturen (glatt, strukturiert)?" (score=0.495)
[faq-data.log] [2025-10-04T11:33:35.556Z] âœ… BÃ¤sta trÃ¤ff: "Gibt es verschiedene OberflÃ¤chentexturen (glatt, strukturiert)?" â†’ "Ja, sowohl glatte als auch strukturierte OberflÃ¤chen sind verfÃ¼gbar...."
[faq-data.log] [2025-10-04T11:33:35.560Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Gibt es verschiedene Farben?"
[detect-lang.log] [2025-10-04T11:33:35.561Z] âœ… FAQ fuzzy detect: "Gibt es verschiedene Farben?" â†’ DE
[chat-pipeline.log] [2025-10-04T11:33:35.561Z] [id=09d7d] ğŸŒ Lang detect: "Gibt es verschiedene Farben?" â†’ lang=DE, via=faq-fuzzy, conf=1
[faq-data.log] [2025-10-04T11:33:35.566Z] [DEBUG] searchFaq lang=DE, input="Gibt es verschiedene Farben?" â†’ 1 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:35.566Z]    #1: "Gibt es verschiedene OberflÃ¤chentexturen (glatt, strukturiert)?" (score=0.495)
[faq-data.log] [2025-10-04T11:33:35.567Z] âœ… BÃ¤sta trÃ¤ff: "Gibt es verschiedene OberflÃ¤chentexturen (glatt, strukturiert)?" â†’ "Ja, sowohl glatte als auch strukturierte OberflÃ¤chen sind verfÃ¼gbar...."
[chat-pipeline.log] [2025-10-04T11:33:35.567Z] [id=09d7d] âœ… FAQ hit: "Gibt es verschiedene Farben?" â†’ "Ja, sowohl glatte als auch strukturierte OberflÃ¤chen sind verfÃ¼gbar...."
[DE] Gibt es verschiedene Farben? â†’ got=DE, expected=DE, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Gibt es verschiedene Farben?", pre=UNKNOWN (via=heuristic), chat=DE (via=faq) }
[faq-data.log] [2025-10-04T11:33:35.583Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Sind die Platten rutschfest?"
[faq-data.log] [2025-10-04T11:33:35.587Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Sind die Platten rutschfest?"
[faq-data.log] [2025-10-04T11:33:35.591Z] [DEBUG] searchFaq lang=DE, input="Sind die Platten rutschfest?" â†’ 1 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:35.591Z]    #1: "Sind die Fliesen rutschfest?" (score=0.378)
[faq-data.log] [2025-10-04T11:33:35.592Z] âœ… BÃ¤sta trÃ¤ff: "Sind die Fliesen rutschfest?" â†’ "Ja, klinkerdÃ¤ckÂ® hat rutschfeste OberflÃ¤chen, die fÃ¼r den AuÃŸenbereich konzipier..."
[faq-data.log] [2025-10-04T11:33:35.595Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Sind die Platten rutschfest?"
[detect-lang.log] [2025-10-04T11:33:35.596Z] âœ… FAQ fuzzy detect: "Sind die Platten rutschfest?" â†’ DE
[chat-pipeline.log] [2025-10-04T11:33:35.596Z] [id=9ed2f] ğŸŒ Lang detect: "Sind die Platten rutschfest?" â†’ lang=DE, via=faq-fuzzy, conf=1
[faq-data.log] [2025-10-04T11:33:35.600Z] [DEBUG] searchFaq lang=DE, input="Sind die Platten rutschfest?" â†’ 1 trÃ¤ffar
[faq-data.log] [2025-10-04T11:33:35.600Z]    #1: "Sind die Fliesen rutschfest?" (score=0.378)
[faq-data.log] [2025-10-04T11:33:35.601Z] âœ… BÃ¤sta trÃ¤ff: "Sind die Fliesen rutschfest?" â†’ "Ja, klinkerdÃ¤ckÂ® hat rutschfeste OberflÃ¤chen, die fÃ¼r den AuÃŸenbereich konzipier..."
[chat-pipeline.log] [2025-10-04T11:33:35.602Z] [id=9ed2f] âœ… FAQ hit: "Sind die Platten rutschfest?" â†’ "Ja, klinkerdÃ¤ckÂ® hat rutschfeste OberflÃ¤chen, die fÃ¼r den AuÃŸenbereich konzipier..."
[DE] Sind die Platten rutschfest? â†’ got=DE, expected=DE, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Sind die Platten rutschfest?", pre=SE (via=heuristic+anchors), chat=DE (via=faq) }
[faq-data.log] [2025-10-04T11:33:35.605Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="klinkerdak mÃ¥tt??"
[faq-data.log] [2025-10-04T11:33:35.607Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="klinkerdak mÃ¥tt??"
[faq-data.log] [2025-10-04T11:33:35.610Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="klinkerdak mÃ¥tt??"
[faq-data.log] [2025-10-04T11:33:35.613Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="klinkerdak mÃ¥tt??"
[detect-lang.log] [2025-10-04T11:33:35.613Z] â„¹ï¸ Rules resultat: {"lang":"SE","via":"regex-exclusive","confidence":1,"NeedsAI":false,"matches":[]} (conf=1)
[detect-lang.log] [2025-10-04T11:33:35.614Z] â¬…ï¸ Default return: lang=SE, conf=1
[chat-pipeline.log] [2025-10-04T11:33:35.614Z] [id=33e83] ğŸŒ Lang detect: "klinkerdak mÃ¥tt??" â†’ lang=SE, via=regex-exclusive, conf=1
[faq-data.log] [2025-10-04T11:33:35.616Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="klinkerdak mÃ¥tt??"
[faq-data.log] [2025-10-04T11:33:35.619Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="klinkerdak mÃ¥tt??"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:39.568Z] [id=33e83] ğŸ¤– AI fallback: "klinkerdak mÃ¥tt??" (lang=SE, via=regex-exclusive) â†’ "MÃ¥tten fÃ¶r ett klinkerdak kan variera beroende pÃ¥ vilken typ av takpannor du anv..."
[FUZZY] klinkerdak mÃ¥tt?? â†’ got=SE, expected=SE, ok=ğŸŸ¢
ğŸ¤– AI fallback ACTUALLY USED for input="klinkerdak mÃ¥tt??"
[faq-data.log] [2025-10-04T11:33:39.584Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="klinkerdÃ¤ck slipp??"
[faq-data.log] [2025-10-04T11:33:39.586Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="klinkerdÃ¤ck slipp??"
[faq-data.log] [2025-10-04T11:33:39.589Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="klinkerdÃ¤ck slipp??"
[faq-data.log] [2025-10-04T11:33:39.591Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="klinkerdÃ¤ck slipp??"
[detect-lang.log] [2025-10-04T11:33:39.600Z] â„¹ï¸ Rules resultat: {"lang":"SE","via":"heuristic+anchors","matches":[{"word":"klinkerdÃ¤ck","match":"klinkerdÃ¤cket","rating":0.9090909090909091}],"confidence":0.7,"NeedsAI":false} (conf=0.8)
[detect-lang.log] [2025-10-04T11:33:39.600Z] â¬…ï¸ Default return: lang=SE, conf=0.8
[chat-pipeline.log] [2025-10-04T11:33:39.601Z] [id=81e96] ğŸŒ Lang detect: "klinkerdÃ¤ck slipp??" â†’ lang=SE, via=heuristic+anchors, conf=0.8
[faq-data.log] [2025-10-04T11:33:39.603Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="klinkerdÃ¤ck slipp??"
[faq-data.log] [2025-10-04T11:33:39.605Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="klinkerdÃ¤ck slipp??"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:48.096Z] [id=81e96] ğŸ¤– AI fallback: "klinkerdÃ¤ck slipp??" (lang=SE, via=heuristic+anchors) â†’ "Att slipa ett klinkerdÃ¤ck kan vara en bra idÃ© fÃ¶r att underhÃ¥lla och fÃ¶rlÃ¤nga li..."
[FUZZY] klinkerdÃ¤ck slipp?? â†’ got=SE, expected=SE, ok=ğŸŸ¢
ğŸ¤– AI fallback ACTUALLY USED for input="klinkerdÃ¤ck slipp??"
ğŸ¤ª Gibberish (alla jÃ¤ttelÃ¥nga ord) { message: 'asdkjhqwe123' }
[gate.log] [2025-10-04T11:33:48.104Z] ğŸ¤ª Gibberish IP=test-ip-0 msg="asdkjhqwe123"
[GIBBERISH] asdkjhqwe123 â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="asdkjhqwe123", pre=UNKNOWN (via=heuristic), chat=FILTER (via=gibberish) }
[gate.log] [2025-10-04T11:33:48.111Z] ğŸ“ Kort text IP=test-ip-1 msg="!!!!!!?????"
[GIBBERISH] !!!!!!????? â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="!!!!!!?????", pre=UNKNOWN (via=heuristic), chat=FILTER (via=short-text) }
[faq-data.log] [2025-10-04T11:33:48.156Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
[faq-data.log] [2025-10-04T11:33:48.189Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
[faq-data.log] [2025-10-04T11:33:48.224Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
[faq-data.log] [2025-10-04T11:33:48.256Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
[detect-lang.log] [2025-10-04T11:33:48.257Z] â„¹ï¸ Rules resultat: {"lang":"SE","via":"regex-exclusive","confidence":1,"NeedsAI":false,"matches":[]} (conf=1)
[detect-lang.log] [2025-10-04T11:33:48.258Z] â¬…ï¸ Default return: lang=SE, conf=1
[chat-pipeline.log] [2025-10-04T11:33:48.258Z] [id=3fd19] ğŸŒ Lang detect: "Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................." â†’ lang=SE, via=regex-exclusive, conf=1
[faq-data.log] [2025-10-04T11:33:48.288Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
[faq-data.log] [2025-10-04T11:33:48.318Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:49.519Z] [id=3fd19] ğŸ¤– AI fallback: "Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................." (lang=SE, via=regex-exclusive) â†’ "Det verkar som att du testar ett lÃ¤ngdfilter med en lÃ¥ng text. Om du har nÃ¥gra s..."
[LONG] Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ................................................... â†’ got=SE, expected=FILTER, ok=ğŸ”´
ğŸ¤– AI fallback ACTUALLY USED for input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ..................................................."
[faq-data.log] [2025-10-04T11:33:49.563Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
[faq-data.log] [2025-10-04T11:33:49.574Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
[faq-data.log] [2025-10-04T11:33:49.586Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
[faq-data.log] [2025-10-04T11:33:49.597Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
[detect-lang.log] [2025-10-04T11:33:49.626Z] â„¹ï¸ Rules resultat: {"lang":"SE","via":"heuristic+anchors","matches":[{"word":"long","match":"long","rating":1}],"confidence":0.7,"NeedsAI":false} (conf=0.8)
[detect-lang.log] [2025-10-04T11:33:49.626Z] â¬…ï¸ Default return: lang=SE, conf=0.8
[chat-pipeline.log] [2025-10-04T11:33:49.627Z] [id=5d67b] ğŸŒ Lang detect: "Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦" â†’ lang=SE, via=heuristic+anchors, conf=0.8
[faq-data.log] [2025-10-04T11:33:49.637Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
[faq-data.log] [2025-10-04T11:33:49.648Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:50.387Z] [id=5d67b] ğŸ¤– AI fallback: "Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦" (lang=SE, via=heuristic+anchors) â†’ "It seems like you're testing the system with a repetitive text. If you have any ..."
[LONG] Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦ â†’ got=SE, expected=FILTER, ok=ğŸ”´
ğŸ¤– AI fallback ACTUALLY USED for input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦"
[faq-data.log] [2025-10-04T11:33:50.397Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="cheap viagra online"
[faq-data.log] [2025-10-04T11:33:50.399Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="cheap viagra online"
[faq-data.log] [2025-10-04T11:33:50.401Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="cheap viagra online"
[faq-data.log] [2025-10-04T11:33:50.404Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="cheap viagra online"
[detect-lang.log] [2025-10-04T11:33:50.411Z] â„¹ï¸ Rules resultat: {"lang":"UNKNOWN","via":"heuristic","matches":[],"confidence":0.5,"NeedsAI":true} (conf=0.6)
[detect-lang.log] [2025-10-04T11:33:50.411Z] ğŸ¤– AI fallback aktiverad fÃ¶r input="cheap viagra online"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: detectLangCore)
[detect-lang.log] [2025-10-04T11:33:50.814Z] ğŸ¤– AI svar: "EN"
[chat-pipeline.log] [2025-10-04T11:33:50.815Z] [id=92cd8] ğŸŒ Lang detect: "cheap viagra online" â†’ lang=EN, via=AI-fallback, conf=0.9
[faq-data.log] [2025-10-04T11:33:50.817Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="cheap viagra online"
[faq-data.log] [2025-10-04T11:33:50.820Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="cheap viagra online"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:54.833Z] [id=92cd8] ğŸ¤– AI fallback: "cheap viagra online" (lang=EN, via=AI-fallback) â†’ "If you're looking to purchase Viagra or its generic versions online, it's import..."
[BLOCK] cheap viagra online â†’ got=EN, expected=FILTER, ok=ğŸ”´
ğŸ¤– AI fallback ACTUALLY USED for input="cheap viagra online"
âš ï¸ PreDetect â‰  ChatDetect { input="cheap viagra online", pre=UNKNOWN (via=heuristic), chat=EN (via=ai) }
[faq-data.log] [2025-10-04T11:33:54.848Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="lottery scam free money"
[faq-data.log] [2025-10-04T11:33:54.851Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DA, input="lottery scam free money"
[faq-data.log] [2025-10-04T11:33:54.854Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=DE, input="lottery scam free money"
[faq-data.log] [2025-10-04T11:33:54.858Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=EN, input="lottery scam free money"
[detect-lang.log] [2025-10-04T11:33:54.868Z] â„¹ï¸ Rules resultat: {"lang":"SE","via":"heuristic+anchors","matches":[{"word":"free","match":"free","rating":1}],"confidence":0.7,"NeedsAI":false} (conf=0.8)
[detect-lang.log] [2025-10-04T11:33:54.868Z] â¬…ï¸ Default return: lang=SE, conf=0.8
[chat-pipeline.log] [2025-10-04T11:33:54.869Z] [id=0fe05] ğŸŒ Lang detect: "lottery scam free money" â†’ lang=SE, via=heuristic+anchors, conf=0.8
[faq-data.log] [2025-10-04T11:33:54.872Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="lottery scam free money"
[faq-data.log] [2025-10-04T11:33:54.874Z] â„¹ï¸ searchFaq: inga trÃ¤ffar fÃ¶r lang=SE, input="lottery scam free money"
âœ… OPENAI_API_KEY loaded (length: 164)
â™»ï¸ OpenAI client reused (called from: unknown)
[chat-pipeline.log] [2025-10-04T11:33:58.800Z] [id=0fe05] ğŸ¤– AI fallback: "lottery scam free money" (lang=SE, via=heuristic+anchors) â†’ "It sounds like you might be referring to a situation where someone is offering y..."
[BLOCK] lottery scam free money â†’ got=SE, expected=FILTER, ok=ğŸ”´
ğŸ¤– AI fallback ACTUALLY USED for input="lottery scam free money"
[RateLimiter] ğŸš« SLOW block ip=test-ip-0 (max 7 per 60s)
[gate.log] [2025-10-04T11:33:58.803Z] â±ï¸ Rate-limit triggad IP=test-ip-0 â†’ ğŸš« SLOW block ip=test-ip-0 (max 7 per 60s)
[GREETING] hej â†’ got=FILTER, expected=SE, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="hej", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[RateLimiter] ğŸš« SLOW block ip=test-ip-1 (max 7 per 60s)
[gate.log] [2025-10-04T11:33:58.808Z] â±ï¸ Rate-limit triggad IP=test-ip-1 â†’ ğŸš« SLOW block ip=test-ip-1 (max 7 per 60s)
[GREETING] hello there â†’ got=FILTER, expected=EN, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="hello there", pre=EN (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
ğŸ¤ª Gibberish (>50% icke-bokstÃ¤ver) { message: '12345' }
[gate.log] [2025-10-04T11:33:58.811Z] ğŸ¤ª Gibberish IP=test-ip-0 msg="12345"
[RELEVANCE] 12345 â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="12345", pre=UNKNOWN (via=heuristic), chat=FILTER (via=gibberish) }
[gate.log] [2025-10-04T11:33:58.814Z] ğŸ“ Kort text IP=test-ip-1 msg="??!!"
[RELEVANCE] ??!! â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="??!!", pre=UNKNOWN (via=heuristic), chat=FILTER (via=short-text) }

ğŸŸ© MINI torture klart. Totala mismatchar: 6

[BLOCK] lottery scam free money â†’ got=SE, expected=FILTER, ok=ğŸ”´
ğŸ¤– AI fallback ACTUALLY USED for input="lottery scam free money"
[GREETING] hej â†’ got=FILTER, expected=SE, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="hej", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[GREETING] hello there â†’ got=FILTER, expected=EN, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="hello there", pre=EN (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[RELEVANCE] 12345 â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="12345", pre=UNKNOWN (via=heuristic), chat=FILTER (via=gibberish) }
[RELEVANCE] ??!! â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="??!!", pre=UNKNOWN (via=heuristic), chat=FILTER (via=short-text) }

ğŸŸ© MINI torture klart. Totala mismatchar: 6
âš ï¸ PreDetect â‰  ChatDetect: 11 fall
=== END 2025-10-04T13:04:50.218Z ===

=== MINI TORTURE START 2025-10-04T13:04:55.241Z ===
ğŸš€ Running MINI torture test (direct chatPipeline)
[SE] Vilka mÃ¥tt har ni? â†’ got=SE, expected=SE, ok=ğŸŸ¢
[SE] Ã„r plattorna halksÃ¤kra? â†’ got=SE, expected=SE, ok=ğŸŸ¢
[EN] What sizes do you offer? â†’ got=EN, expected=EN, ok=ğŸŸ¢
[EN] Are the tiles slip resistant? â†’ got=EN, expected=EN, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Are the tiles slip resistant?", pre=SE (via=heuristic+anchors), chat=EN (via=faq) }
[DA] Er det frostsikkert? â†’ got=DA, expected=DA, ok=ğŸŸ¢
ğŸ¤– AI fallback ACTUALLY USED for input="Er det frostsikkert?"
âš ï¸ PreDetect â‰  ChatDetect { input="Er det frostsikkert?", pre=UNKNOWN (via=heuristic), chat=DA (via=ai) }
[DA] Kan jeg selv montere det? â†’ got=DA, expected=DA, ok=ğŸŸ¢
ğŸ¤– AI fallback ACTUALLY USED for input="Kan jeg selv montere det?"
[DE] Gibt es verschiedene Farben? â†’ got=DE, expected=DE, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Gibt es verschiedene Farben?", pre=UNKNOWN (via=heuristic), chat=DE (via=faq) }
[DE] Sind die Platten rutschfest? â†’ got=FILTER, expected=DE, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="Sind die Platten rutschfest?", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[FUZZY] klinkerdak mÃ¥tt?? â†’ got=FILTER, expected=SE, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="klinkerdak mÃ¥tt??", pre=SE (via=regex-exclusive), chat=FILTER (via=rate-limit) }
[FUZZY] klinkerdÃ¤ck slipp?? â†’ got=FILTER, expected=SE, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="klinkerdÃ¤ck slipp??", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[GIBBERISH] asdkjhqwe123 â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="asdkjhqwe123", pre=UNKNOWN (via=heuristic), chat=FILTER (via=gibberish) }
[GIBBERISH] !!!!!!????? â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="!!!!!!?????", pre=UNKNOWN (via=heuristic), chat=FILTER (via=short-text) }
[LONG] Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ................................................... â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Det hÃ¤r Ã¤r en vÃ¤ldigt lÃ¥ng text bara fÃ¶r sanity-test, vi behÃ¶ver inte 500+ tecken men det rÃ¤cker att visa att lÃ¤ngdfiltret triggas genom att den hÃ¤r strÃ¤ngen Ã¤r riktigt lÃ¥ng och fortsÃ¤tter med massa utfyllnad ...................................................", pre=SE (via=regex-exclusive), chat=FILTER (via=rate-limit) }
[LONG] Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦ â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="Another very very long nonsense text for sanity-test sanity-test sanity-test â€¦", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[BLOCK] cheap viagra online â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="cheap viagra online", pre=UNKNOWN (via=heuristic), chat=FILTER (via=rate-limit) }
[BLOCK] lottery scam free money â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="lottery scam free money", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[GREETING] hej â†’ got=FILTER, expected=SE, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="hej", pre=SE (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[GREETING] hello there â†’ got=FILTER, expected=EN, ok=ğŸ”´
âš ï¸ PreDetect â‰  ChatDetect { input="hello there", pre=EN (via=heuristic+anchors), chat=FILTER (via=rate-limit) }
[RELEVANCE] 12345 â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="12345", pre=UNKNOWN (via=heuristic), chat=FILTER (via=gibberish) }
[RELEVANCE] ??!! â†’ got=FILTER, expected=FILTER, ok=ğŸŸ¢
âš ï¸ PreDetect â‰  ChatDetect { input="??!!", pre=UNKNOWN (via=heuristic), chat=FILTER (via=short-text) }

ğŸŸ© MINI torture klart. Totala mismatchar: 5
âš ï¸ PreDetect â‰  ChatDetect: 16 fall
=== END 2025-10-04T13:05:06.289Z ===

